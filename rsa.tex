\documentclass[a4paper,12pt,twoside,fleqn]{book}

\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{unicode-math}
\usepackage{seqsplit}

\usepackage[a4paper,top=.5in,bottom=.5in,left=.5in,right=.5in]{geometry}
\usepackage{booktabs}
\usepackage[svgnames]{xcolor}
\usepackage{pdfpages}
\usepackage{minted}
\usepackage[skins,minted]{tcolorbox}
\usepackage{csquotes}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{titling}
\usepackage[hidelinks,hyperfootnotes=false,breaklinks=true,pdfauthor={Winterer, Mathis Aaron},pdftitle={Bedeutung von starken Primzahlen für die heutige Zeit},pdfsubject={Mathematische Exemplifikation des RSA-Algorithmuses},pdfkeywords={RSA,Verschlüsselung,Kryptographie,Mathematik,Primzahlen},colorlinks=true,linkcolor=black,filecolor=magenta,urlcolor=red,citecolor=blue]{hyperref}
\usepackage{tocloft}
\usepackage{fontspec}
\usepackage{polyglossia}
\usepackage[backend=biber,bibstyle=authoryear,style=alphabetic,seconds=true,]{biblatex}

\setmainlanguage[variant=german,spelling=new,capitaleszett=true,babelshorthands=true]{german}
\setmainfont{IBM Plex Mono}
\setsansfont{IBM Plex Mono}
\setmonofont{IBM Plex Mono}
\setmathfont{STIX Two Math}

\emergencystretch=1em

\graphicspath{{figs/}}
\addbibresource{bib.bib}
\definecolor{mintbg}{rgb}{0.23, 0.27, 0.29}
\definecolor{red}{HTML}{FF6961}
\usemintedstyle[csharp]{github-dark}
\setminted[csharp]{
  mathescape,
  frame=leftline,
  framesep=2mm,
  numberblanklines,
  numbersep=12pt,
  numbersep=5pt,
  baselinestretch=1.2,
  rulecolor=red,
  stripall,
  tabsize=4,
  funcnamehighlighting=true,
  autogobble,
  linenos,
  fontsize=\footnotesize,
  bgcolor=mintbg,
  breaklines,
}
\newtcblisting{cminted}[2][]{listing engine=minted, listing only,#1, title=#2, minted language=csharp, colback=mintbg}

\titleformat{\chapter}[block]{\huge\bfseries}{\thechapter.}{0.5em}{}[\titlerule\titlerule\vspace{-2em}]

\fancypagestyle{plain}{%
  \lhead{}
  \fancyhead[LO]{}
  \fancyhead[RE]{}
  \fancyhead[LE,RO]{}
  \renewcommand{\headrulewidth}{0pt}
  \fancyfoot{}
  \fancyfoot[LO]{}
  \fancyfoot[RE]{}
  \fancyfoot[LO,RE]{\thepage}
  \renewcommand{\footrulewidth}{1pt}
}

\futurelet\TMPfootrule\def\footrule{{\color{black!15}\TMPfootrule}}

\setlength{\cftsubsubsecnumwidth}{4.5em}
\renewcommand{\baselinestretch}{1.2} 
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
\setlength{\parindent}{0pt}
\setlength{\footskip}{20pt}
\titlespacing*{\chapter}{0pt}{-19pt}{6em}
\renewcommand{\cfttoctitlefont}{\sffamily\bfseries\Large}
\renewcommand{\cftchapfont}{\bfseries}
\renewcommand{\cftsubsecfont}{\normalfont}
\renewcommand{\maketitle}{%
  \begin{center}
    \Huge\thetitle\\
    \vspace{1em}
    \normalsize\textit{Eine Einführung in das RSA-Verschlüsselungssystem}\\
    \vspace{2em}
    \Large\theauthor\\
    \vspace{2em}
    \large\textit{\textlang{german}{\today}}
  \end{center}
  \newpage
}

\title{Bedeutung von starken Primzahlen für die heutige Zeit}
\author{Winterer, Mathis Aaron}

\begin{document}
  \nonfrenchspacing
  \frontmatter{}
  \pagenumbering{gobble}
  \maketitle

  \pagestyle{plain}
  \pagenumbering{roman}
  \tableofcontents
  \newpage
  \listoffigures
  \newpage
  \listoftables
  \newpage

  \mainmatter{}
  \input{chapters/introduction}
  \newpage
  \input{chapters/principles/principles.tex}
  \newpage
  \input{chapters/examples/examples.tex}
  \newpage
  \input{chapters/conclusion}
  \newpage
  \backmatter{}

  \nocite{*}
  \printbibliography{}
\end{document}
